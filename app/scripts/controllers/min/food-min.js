"use strict";var global=0;angular.module("myappApp").controller("FoodCtrl",function(e){e.awesomeThings=[],e.comment=[],e.counter=1,e.btnAdd=function(){""!==e.txtcomment&&(e.comment.push(e.txtcomment),e.txtcomment="",global=e.counter++)}}),window.indexedDB=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,window.IDBTransaction=window.IDBTransaction||window.webkitIDBTransaction||window.msIDBTransaction,window.IDBKeyRange=window.IDBKeyRange||window.webkitIDBKeyRange||window.msIDBKeyRange;var request=indexedDB.open("testdb",6);request.onerror=function(e){console.log(e)},request.onupgradeneeded=function(e){console.log("database upgraded");var o=e.target.result;console.log(o);var n=o.createObjectStore("data",{keyPath:"keyPath"})},request.onsuccess=function(e){console.log("database open"),APP.db=e.target.result,APP.ready=!0};var APP={db:null,ready:!1,insert:function(){if(!APP.ready)return void console.log("DB is not ready");var e=global,o=$("#value").val(),n=APP.db.transaction("data","readwrite"),t=n.objectStore("data"),a={keyPath:e,value:o};console.log("inserting",a);var d=t.put(a);d.onsuccess=function(e){console.log(e)}},fetch:function(){if(!APP.ready)return void console.log("DB is not ready");var e=APP.db.transaction(["data"],"readonly"),o=e.objectStore("data"),n=o.count(),t=0;n.onsuccess=function(){for(t=n.result,console.log(n.result);t>global;){var e=global++,o=APP.db.transaction("data","readwrite"),a=o.objectStore("data"),d=a.get(e);d.onsuccess=function(e){console.log(e),$("#output").prepend('<li class="animated fadeInDown">'+e.target.result.value+"</li>")}}},document.getElementById("fetch").onclick=""},remove:function(){}};